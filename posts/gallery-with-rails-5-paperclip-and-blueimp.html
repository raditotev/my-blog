<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="og:title" content="Gallery with Rails 5, Paperclip and blueimp" class="jsx-eb7a88ca53252729"/><title class="jsx-eb7a88ca53252729">Gallery with Rails 5, Paperclip and blueimp</title><meta name="next-head-count" content="4"/><link rel="icon" href="/favicon/favicon.ico"/><meta name="description" content="A collection of technical posts."/><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'undefined', {
              page_path: window.location.pathname,
            });
          </script><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f65e66e62fc5ca80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-02d0f4839caa4a8e.js" defer=""></script><script src="/_next/static/chunks/83-7030382a9597fa38.js" defer=""></script><script src="/_next/static/chunks/32-1cf93db441761c8a.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-7655989d47098e38.js" defer=""></script><script src="/_next/static/PvTMf3wyEBu3o-rd_Z3Tv/_buildManifest.js" defer=""></script><script src="/_next/static/PvTMf3wyEBu3o-rd_Z3Tv/_ssgManifest.js" defer=""></script><script src="/_next/static/PvTMf3wyEBu3o-rd_Z3Tv/_middlewareManifest.js" defer=""></script><style id="__jsx-fdefdd4b6c4ce2c4">span.jsx-fdefdd4b6c4ce2c4{color:#333;font-size:.9rem}</style><style id="__jsx-7814f24efc48ee15">.list-categories.jsx-7814f24efc48ee15 a.jsx-7814f24efc48ee15{color:#333;text-transform:uppercase;font-size:.6rem;font-weight:700;margin-right:10px}</style><style id="__jsx-eb7a88ca53252729">.post.jsx-eb7a88ca53252729{width:100%}header.jsx-eb7a88ca53252729{text-align:center;margin-bottom:3rem}.post.jsx-eb7a88ca53252729 h1.jsx-eb7a88ca53252729{margin-bottom:.2rem}a.jsx-eb7a88ca53252729{color:black}footer.jsx-eb7a88ca53252729{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}footer.jsx-eb7a88ca53252729 a.go-back.jsx-eb7a88ca53252729{font-size:1.5rem}@media(max-width:820px){footer.jsx-eb7a88ca53252729{display:block}footer.jsx-eb7a88ca53252729 a.go-back.jsx-eb7a88ca53252729{float:right}}</style><style id="__jsx-5cae0e9dd922305c">html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:20px}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}p{font-weight:400;line-height:32px}a{text-decoration:none}img{width:100%}img[src*="#center"]{display:block;margin:auto}@media(max-width:820px){body{font-size:18px}p{line-height:28px}img{max-width:80vw}}</style><style id="__jsx-53df2e978e8b299a">header.jsx-5a195dee6678eb3{width:100vw;padding:1.7rem;background-color:rgba(0,0,0,.9);text-align:center}header.jsx-5a195dee6678eb3 h1.jsx-5a195dee6678eb3{margin:0}header.jsx-5a195dee6678eb3 a.jsx-5a195dee6678eb3{text-decoration:none;color:crimson}main.jsx-5a195dee6678eb3{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:20px auto;max-width:820px}@media(max-width:820px){main.jsx-5a195dee6678eb3{width:95vw}}</style></head><body><div id="__next" data-reactroot=""><div class="jsx-5a195dee6678eb3"><header class="jsx-5a195dee6678eb3"><div class="jsx-5a195dee6678eb3"><a class="jsx-5a195dee6678eb3" href="/"><h1 class="jsx-5a195dee6678eb3">Radi&#x27;s Blog</h1></a></div></header><main class="jsx-5a195dee6678eb3"><div class="jsx-eb7a88ca53252729 post"><header class="jsx-eb7a88ca53252729"><h1 class="jsx-eb7a88ca53252729">Gallery with Rails 5, Paperclip and blueimp</h1><span class="jsx-fdefdd4b6c4ce2c4"><time dateTime="2016-10-16T00:00:00.000Z" class="jsx-fdefdd4b6c4ce2c4">16 October 2016</time></span></header><p>Recently I had to build a gallery with Rails and it took me a few days finding solutions to my problems on the web. This article is the result of everything I found, put together. I&#x27;ll keep it as brief as possible and if you have any questions please drop me an email and I&#x27;ll try to explain as best as I can.</p>
<p>Alright, enough chit chat let&#x27;s roll our sleeves. First we have to create our new project.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails new gallery -T</span></code></div></pre>
<p>Sweet. Next we&#x27;ll update our Gemfile</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># Gemfile</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># File upload</span><span>
</span><span>gem </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&quot;paperclip&quot;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&quot;~&gt; 5.0.0&quot;</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># Forms</span><span>
</span><span>gem </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;simple_form&#x27;</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">#Bootstrap</span><span>
</span><span>gem </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;bootstrap-sass&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;~&gt; 3.3.6&#x27;</span><span>
</span></code></div></pre>
<p>Run bundle install.<br/>
<!-- -->Install simple_form.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails generate simple_form:install</span></code></div></pre>
<p>Change the name of your application.css to application.scss and import bootstrap.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-css" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* application.scss */</span><span>
</span>
<span></span><span class="token rule" style="color:rgb(255, 203, 139)">@import</span><span class="token" style="color:rgb(255, 203, 139)"> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;bootstrap-sprockets&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token rule" style="color:rgb(255, 203, 139)">@import</span><span class="token" style="color:rgb(255, 203, 139)"> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;bootstrap&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<p>Now that we have all the gems it&#x27;s time to create our resources. We&#x27;ll need models and two controllers for Album and Photo. For the Album we&#x27;ll need all controller actions and for the Photo only destroy action.
Let&#x27;s start with the Album first.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails g scaffold Album name description</span></code></div></pre>
<p>This creates the controller, the model and prepares the table for us.
Let&#x27;s create the controller, model and table for our Photos. We&#x27;ll need only destroy action, so we run the following generator:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails g controller Photos destroy</span></code></div></pre>
<p>And for the model:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails g model Photo name imageable:references</span></code></div></pre>
<p>I&#x27;ve created Photo as polymorphic model for the needs of my project and I&#x27;ll leave it as polymorphic for this project. It&#x27;s good to see how polymorphic models are used if you haven&#x27;t done it before.
Before we run the migration and create the tables, there are some changes we have to do for the photos table.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">#db/migrations/xxxxxxxxxxxxx_create_photos.rb</span><span>
</span>
<span>t</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>string </span><span class="token" style="color:rgb(128, 203, 196)">:name</span><span>
</span><span>t</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>string </span><span class="token" style="color:rgb(128, 203, 196)">:description</span><span>
</span><span>t</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>references </span><span class="token" style="color:rgb(128, 203, 196)">:imageable</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">polymorphic</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(255, 88, 116)">true</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">index</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(255, 88, 116)">true</span></code></div></pre>
<p>Change the foreign_key: true for polymorphic: true, index: true. This will create the necessary columns for us.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails db</span><span class="token" style="color:rgb(128, 203, 196)">:migrate</span></code></div></pre>
<p>Having the tables ready, it&#x27;s time to add the fields for paperclip. The simplest way is to run paperclip&#x27;s generator.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>rails generate paperclip photo image</span></code></div></pre>
<p>And <code style="font-size:1rem;color:crimson">rails db:migrate</code> again to add the new columns for paperclip to the photos table.
Now update the models.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># album.rb</span><span>
</span>
<span>has_many </span><span class="token" style="color:rgb(128, 203, 196)">:photos</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">as</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:imageable</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">dependent</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:destroy</span><span>
</span><span>validates_presence_of </span><span class="token" style="color:rgb(128, 203, 196)">:name</span><span>
</span><span>default_scope </span><span class="token" style="color:rgb(127, 219, 202)">-</span><span class="token" style="color:rgb(127, 219, 202)">&gt;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> order</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(128, 203, 196)">created_at</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:desc</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># photo.rb</span><span>
</span>
<span>belongs_to </span><span class="token" style="color:rgb(128, 203, 196)">:imageable</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">polymorphic</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(255, 88, 116)">true</span><span>
</span>
<span>has_attached_file </span><span class="token" style="color:rgb(128, 203, 196)">:image</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">styles</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">medium</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&quot;300x300&gt;&quot;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">thumb</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&quot;100x100&gt;&quot;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">default_url</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&quot;/images/:style/missing.png&quot;</span><span>
</span><span>validates_attachment_content_type </span><span class="token" style="color:rgb(128, 203, 196)">:image</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">content_type</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token regex-literal" style="color:rgb(214, 222, 235)">/image\/.*\z/</span></code></div></pre>
<p>When we run the generator for the Photos controller, rails has automatically created a new route for us but it doesn&#x27;t do what we need. Change with the code from the snippet below.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># routes.rb</span><span>
</span>
<span>root to</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&quot;albums#index&quot;</span><span>
</span><span>delete </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;photo/:id&#x27;</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=&gt;</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;photos#destroy&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">as</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;photo&#x27;</span></code></div></pre>
<p>Next step will be to update the form partial for the Albums using simple form and rails&#x27;s file_field_tag for the file attachments. We set the form to be multipart and the file_filed in order to select multiple files. All selected files will be wrapped in an array and passed to the params as key images.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- albums/_form.html.erb --&gt;</span><span>
</span>
<span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> simple_form_for</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">album</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">html</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">{</span><span class="token erb language-erb ruby language-ruby">multipart</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">true</span><span class="token erb language-erb ruby language-ruby">}</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby">f</span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span>
<span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> f</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">input </span><span class="token erb language-erb ruby language-ruby">:name</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span>
<span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> f</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">input </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;Choose photos&quot;</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> file_field_tag </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;images[]&quot;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">type</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">:file</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">multiple</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">true</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span>
<span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> f</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">button </span><span class="token erb language-erb ruby language-ruby">:submit</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span></code></div></pre>
<p>Update the albums_controller to get the array with the images from the params and add them to the given album.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">#albums_controller.rb</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">def</span><span> </span><span class="token method-definition" style="color:rgb(130, 170, 255)">create</span><span>
</span><span>  </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">Album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(127, 219, 202)">new</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>album_params</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span>  respond_to </span><span class="token" style="color:rgb(127, 219, 202)">do</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>format</span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>save
</span>
<span>      </span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">#Add lines bellow</span><span>
</span><span>      </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> params</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span class="token" style="color:rgb(128, 203, 196)">:images</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span>
</span><span>        params</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span class="token" style="color:rgb(128, 203, 196)">:images</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(127, 219, 202)">each</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>image</span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>
</span><span>        </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>photos</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>create</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(128, 203, 196)">image</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> image</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span>
<span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>html </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> redirect_to </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">notice</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;Album was successfully created.&#x27;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>json </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> render </span><span class="token" style="color:rgb(128, 203, 196)">:show</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">status</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:created</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">location</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">else</span><span>
</span><span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>html </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> render </span><span class="token" style="color:rgb(128, 203, 196)">:new</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>json </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> render json</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>errors</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">status</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:unprocessable_entity</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span><span>  </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">end</span></code></div></pre>
<p>It&#x27;s time to fire up the server and see if what we&#x27;ve done so far is working. Go to the new album and create one with a few photos. Everything works fine and we&#x27;re redirected to the show page but only the album name is visible. Let&#x27;s change that. Add the following div just above the links at the bottom. Refresh and hurray, we&#x27;ve got our photos!</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- albums/show.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">photos</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">each</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby">photo</span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>        </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to image_tag</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">photo</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">image</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">url</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">:medium</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> photo</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">image</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">url</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">data</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">{</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">gallery</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;&#x27;</span><span class="token erb language-erb ruby language-ruby">}</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>        </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span></code></div></pre>
<p>Next thing I want to change is when I create a new album and select files, instead of just seeing the number of files selected I want to have some visual representation. Place a holder in the form.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- albums/_form.html.erb --&gt;</span><span>
</span>
<span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> f</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">input </span><span class="token erb language-erb ruby language-ruby">:name</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">image-preview</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span> </span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- Add this line --&gt;</span><span>
</span>
<span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> f</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">input </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;Choose photos&quot;</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span></code></div></pre>
<p>And add the required javascript.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// application.js</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> ready</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token function-variable" style="color:rgb(130, 170, 255)">ready</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">function</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// Photo preview on album create</span><span>
</span><span>  </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> preview </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;#image-preview&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;#images_&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">change</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(127, 219, 202)">function</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">event</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> input </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>event</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">currentTarget</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> files </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> input</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span class="token" style="color:rgb(247, 140, 108)">0</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">files</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:rgb(127, 219, 202)">for</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> i </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">0</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span> i </span><span class="token" style="color:rgb(127, 219, 202)">&lt;</span><span> files</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span> i</span><span class="token" style="color:rgb(127, 219, 202)">++</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>      </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> file </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> files</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span>i</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>      </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> reader </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">new</span><span> </span><span class="token" style="color:rgb(255, 203, 139)">FileReader</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>      reader</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method property-access" style="color:rgb(130, 170, 255)">onload</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">function</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">e</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>        image_base64 </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> e</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">target</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">result</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>        </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> html </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;&lt;img src=&#x27;</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">+</span><span> image_base64 </span><span class="token" style="color:rgb(127, 219, 202)">+</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&quot; style=&#x27;max-width: 200px;&#x27;&gt;&quot;</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>        preview</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">append</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>html</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>      reader</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">readAsDataURL</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>file</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// Clear images when Browse is clicked again</span><span>
</span><span>  </span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;#images_&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">click</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(127, 219, 202)">function</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;#image-preview img&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">remove</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span>
<span></span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token dom" style="color:rgb(214, 222, 235)">document</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">on</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;turbolinks:load&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> ready</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<p>I have two functions. One is to show the selected files. The other one is to clear them from the screen in case the user decides to change his selection.</p>
<p>Another change to the form will be to display all album photos when we update an existing album and provide a button in case the user wants to delete a photo or photos from the collection.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- _form.html.erb --&gt;</span><span>
</span>
<span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> f</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">input </span><span class="token erb language-erb ruby language-ruby">:name</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span>
<span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">if</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">photos</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">any</span><span class="token erb language-erb ruby language-ruby">?</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">images</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">photos</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">each</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby">photo</span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">photo-</span><span class="token erb language-erb delimiter" style="color:rgb(255, 203, 139)">&lt;%=</span><span class="token erb language-erb ruby language-ruby" style="color:rgb(255, 203, 139)"> photo</span><span class="token erb language-erb ruby language-ruby" style="color:rgb(255, 203, 139)">.</span><span class="token erb language-erb ruby language-ruby" style="color:rgb(255, 203, 139)">id </span><span class="token erb language-erb delimiter" style="color:rgb(255, 203, 139)">%&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">image</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>        </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to photo</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">method</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">:delete</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby">
</span><span class="token erb language-erb ruby language-ruby">                          </span><span class="token erb language-erb ruby language-ruby">data</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">{</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">confirm</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;Are you sure?&#x27;</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">}</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby">
</span><span class="token erb language-erb ruby language-ruby">                          </span><span class="token erb language-erb ruby language-ruby">class</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;delete-image&quot;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby">
</span><span class="token erb language-erb ruby language-ruby">                          </span><span class="token erb language-erb ruby language-ruby">remote</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">true</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby">
</span><span class="token erb language-erb ruby language-ruby">                          </span><span class="token erb language-erb ruby language-ruby">title</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;Delete Image&quot;</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>            </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">i</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">glyphicon glyphicon-remove-circle</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">i</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>          </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>        </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> image_tag photo</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">image</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">url</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">:medium</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!--
</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">Add before this div
</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;div id=&quot;image-preview&quot;&gt;&lt;/div&gt;
</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">--&gt;</span></code></div></pre>
<p>To position all buttons add styling as follows:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-css" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* application.scss */</span><span>
</span>
<span></span><span class="token class" style="color:rgb(199, 146, 234);font-style:italic">.image</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">display</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> inline-block</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">position</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> relative</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span>
<span></span><span class="token class" style="color:rgb(199, 146, 234);font-style:italic">.delete-image</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">position</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> absolute</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">top</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">5</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">right</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">5</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">color</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token color">red</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<p>It&#x27;s time to add some code to our photos controller.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># photos_controller.rb</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">def</span><span> </span><span class="token method-definition" style="color:rgb(130, 170, 255)">destroy</span><span>
</span><span>  photo </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> Photo</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>find</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>params</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span class="token" style="color:rgb(128, 203, 196)">:id</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span>  </span><span class="token" style="color:rgb(214, 222, 235)">@id</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> photo</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>id
</span><span>  photo</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>destroy
</span><span>  respond_to </span><span class="token" style="color:rgb(128, 203, 196)">:js</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">end</span></code></div></pre>
<p>Create a new file views/photos/destroy.js.erb and add this code. This will look for a div with the id of the photo being deleted and will remove it from the screen.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// destroy.js.erb</span><span>
</span>
<span></span><span class="token" style="color:rgb(130, 170, 255)">$</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;#photo-&lt;%= @id %&gt;&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">fadeOut</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<p>Now, let&#x27;s update our albums controller in case our user wants to add some photos instead of removing them. Again we&#x27;ll get all the photos being uploaded from the params[:images], but this time instead of blindly creating photos we have to check for duplicates first.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-ruby" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic"># albums_controller.rb</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">def</span><span> </span><span class="token method-definition" style="color:rgb(130, 170, 255)">update</span><span>
</span><span>  respond_to </span><span class="token" style="color:rgb(127, 219, 202)">do</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>format</span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>update</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>album_params</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span>    </span><span class="token" style="color:rgb(127, 219, 202)">if</span><span> params</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span class="token" style="color:rgb(128, 203, 196)">:images</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span>
</span><span>        params</span><span class="token" style="color:rgb(199, 146, 234)">[</span><span class="token" style="color:rgb(128, 203, 196)">:images</span><span class="token" style="color:rgb(199, 146, 234)">]</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token" style="color:rgb(127, 219, 202)">each</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">do</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>image</span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>
</span><span>          existing_image </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>photos</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>find </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span class="token" style="color:rgb(127, 219, 202)">|</span><span>photo</span><span class="token" style="color:rgb(127, 219, 202)">|</span><span> photo</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>image_file_name </span><span class="token" style="color:rgb(127, 219, 202)">==</span><span>
</span><span>                                                                                            image</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>original_filename</span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>          </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>photos</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>create</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(128, 203, 196)">image</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> image</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">unless</span><span> existing_image
</span><span>      </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span>
<span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>html </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> redirect_to </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">notice</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token string-literal" style="color:rgb(173, 219, 103)">&#x27;Album was successfully updated.&#x27;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>json </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> render </span><span class="token" style="color:rgb(128, 203, 196)">:show</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">status</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:ok</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">location</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">else</span><span>
</span><span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>html </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> render </span><span class="token" style="color:rgb(128, 203, 196)">:edit</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>      format</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>json </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> render json</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(214, 222, 235)">@album</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span>errors</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">status</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(128, 203, 196)">:unprocessable_entity</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>    </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span><span>  </span><span class="token" style="color:rgb(127, 219, 202)">end</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">end</span></code></div></pre>
<p>Our form is working now for new albums and editing existing. It&#x27;s time to beautify the way images are displayed on the show page. I&#x27;ll use blueimp&#x27;s gallery. Go to https://github.com/blueimp/Gallery and download blueimp-gallery.css and blueimp-gallery-indicator.css in your stylesheets directory. Include those in your application.scss.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-css" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* application.scss */</span><span>
</span>
<span></span><span class="token rule" style="color:rgb(255, 203, 139)">@import</span><span class="token" style="color:rgb(255, 203, 139)"> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;blueimp-gallery&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token rule" style="color:rgb(255, 203, 139)">@import</span><span class="token" style="color:rgb(255, 203, 139)"> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;blueimp-gallery-indicator&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<p>Then download blueimp-gallery.js to your javascripts directory and include it in your application.js.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// application.js</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// After turbolinks add</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">//= require blueimp-gallery</span></code></div></pre>
<p>Open blueimp-gallery.css and update all urls for loading.gif, error.png, play-pause.png, error.svg and play-pause.svg. A valid url for image in rails looks like this:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-css" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(128, 203, 196)">background</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">url</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;loading.gif&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<p>Also download all the images from blueimp/Gallery/img in your app/assets/images folder.</p>
<p>Now all we have to do is add a snippet of code and our gallery will spring to life. Wrap our code from before in a div tag with an id &quot;links&quot; and add the code snippet for the modal at the bottom of the page. It is IMPORTANT to place this snippet as a direct descendant of the body. If your yield in the application is wrapped in a div or another tag, place the snippet on application.html.erb directly in the body. You can also import it as a partial.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- show.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">container</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">links</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">photos</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">each</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby">photo</span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>        </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to image_tag</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">photo</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">image</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">url</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">:medium</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> photo</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">image</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">url</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">data</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">{</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">gallery</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;&#x27;</span><span class="token erb language-erb ruby language-ruby">}</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>        </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- The Gallery as lightbox dialog, should be a child element of the document body --&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">blueimp-gallery</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">blueimp-gallery blueimp-gallery-controls</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">slides</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">h3</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">title</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">h3</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">prev</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">next</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">close</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">play-pause</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">a</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">ol</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">indicator</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">ol</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span></code></div></pre>
<p>Add the onclick handler for the images, right after the second function handling the Browse click.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// Clear images when Browse is clicked again</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">//  $(&quot;#images_&quot;).click(function(){</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">//    $(&quot;#image-preview img&quot;).remove();</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">//  });</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">//After above function</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// Blueimp Light Box</span><span>
</span><span></span><span class="token dom" style="color:rgb(214, 222, 235)">document</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;links&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method property-access" style="color:rgb(130, 170, 255)">onclick</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">function</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">event</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  event </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> event </span><span class="token" style="color:rgb(127, 219, 202)">||</span><span> </span><span class="token dom" style="color:rgb(214, 222, 235)">window</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">event</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(127, 219, 202)">var</span><span> target </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> event</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">target</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">||</span><span> event</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">srcElement</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span>    link </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> target</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">src</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">?</span><span> target</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">parentNode</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> target</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span>    options </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span> </span><span class="token literal-property" style="color:rgb(128, 203, 196)">index</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> link</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token literal-property" style="color:rgb(128, 203, 196)">event</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> event </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span>    links </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">this</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">getElementsByTagName</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;a&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  blueimp</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access maybe-class-name" style="color:rgb(130, 170, 255)">Gallery</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>links</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> options</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">;</span></code></div></pre>
<p>Our gallery is ready and looks great :) Unfortunately I can&#x27;t say the same for the rest of the pages. I won&#x27;t go crazy but I would like to add some basic styling for our pages. I&#x27;ll start with the application.html.erb and move our notices from index and show in there along with some bootstrap styling.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- application.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- Add after body and before yield --&gt;</span><span>
</span><span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">if</span><span class="token erb language-erb ruby language-ruby"> notice </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">notice</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">alert alert-info alert-dismissible</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">role</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">alert</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">button</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">type</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">button</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">close</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">data-dismiss</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">alert</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">aria-label</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">Close</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">span</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">aria-hidden</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">true</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token named-entity" style="color:rgb(173, 219, 103)">&amp;times;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">span</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">button</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> notice </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span></span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span></code></div></pre>
<p>Add bootstrap-sprockets after jquery in order for our dismiss button to work.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// application.js</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// after require jquery</span><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">//= require bootstrap-sprockets</span></code></div></pre>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-css" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* application.scss */</span><span>
</span>
<span></span><span class="token id" style="color:rgb(199, 146, 234);font-style:italic">#notice</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">width</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">50</span><span class="token unit">%</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">text-align</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> center</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">margin</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">10</span><span class="token unit">px</span><span> auto</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- index.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- Remove &lt;p id=&quot;notice&quot;&gt;</span><span class="token erb language-erb delimiter" style="color:rgb(99, 119, 119);font-style:italic">&lt;%=</span><span class="token erb language-erb ruby language-ruby" style="color:rgb(99, 119, 119);font-style:italic"> notice </span><span class="token erb language-erb delimiter" style="color:rgb(99, 119, 119);font-style:italic">%&gt;</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;/p&gt; --&gt;</span></code></div></pre>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- show.html.erb
</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">
</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic"> Remove &lt;p id=&quot;notice&quot;&gt;</span><span class="token erb language-erb delimiter" style="color:rgb(99, 119, 119);font-style:italic">&lt;%=</span><span class="token erb language-erb ruby language-ruby" style="color:rgb(99, 119, 119);font-style:italic"> notice </span><span class="token erb language-erb delimiter" style="color:rgb(99, 119, 119);font-style:italic">%&gt;</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;/p&gt;
</span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">--&gt;</span></code></div></pre>
<p>In application.html.erb I&#x27;ll add a header.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- application.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">section</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">container</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">h1</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">text-right</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;Gallery&quot;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> root_url </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">h1</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">section</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span></code></div></pre>
<p>Some styling for our index page with out of the box bootstrap.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- index.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">h2</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">text-center</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;New Album&#x27;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> new_album_path </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">h2</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">container</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">row</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@albums</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">each</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">do</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby">album</span><span class="token erb language-erb ruby language-ruby">|</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">col-sm-6 col-md-4</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">thumbnail</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>          </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">if</span><span class="token erb language-erb ruby language-ruby"> album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">photos</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">any</span><span class="token erb language-erb ruby language-ruby">?</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>            </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to image_tag</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">photos</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">first</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">image</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">url</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">:medium</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> album </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>          </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>          </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">caption</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">h3</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">text-center</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">name </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">h3</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">p</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> album</span><span class="token erb language-erb ruby language-ruby">.</span><span class="token erb language-erb ruby language-ruby">description </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">p</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">p</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>              </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;Edit&quot;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> edit_album_path</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">album</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">class</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;btn btn-warning&quot;</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>              </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;Delete&quot;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> album</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">class</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&quot;btn btn-danger pull-right&quot;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby">
</span><span class="token erb language-erb ruby language-ruby">                                           </span><span class="token erb language-erb ruby language-ruby">method</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">:delete</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby">
</span><span class="token erb language-erb ruby language-ruby">                                           </span><span class="token erb language-erb ruby language-ruby">data</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">{</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">confirm</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;Are you sure?&#x27;</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">}</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>             </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">p</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>          </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>    </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">end</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span></code></div></pre>
<p>In show.html remove the rails generated links.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- show.html.erb --&gt;</span><span>
</span>
<span>remove </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;Edit&#x27;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> edit_album_path</span><span class="token erb language-erb ruby language-ruby">(</span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby">)</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span> |
</span><span> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> link_to </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;Back&#x27;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> albums_path </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span></code></div></pre>
<p>Place new and edit pages in the container.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- new.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">h1</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">text-center</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>New Album</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">h1</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">container</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> render </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;form&#x27;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">album</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span></code></div></pre>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-erb" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">&lt;!-- edit.html.erb --&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">h1</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">text-center</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>Editing Album</span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">h1</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(127, 219, 202)"> </span><span class="token" style="color:rgb(173, 219, 103);font-style:italic">class</span><span class="token attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(255, 203, 139)">container</span><span class="token" style="color:rgb(199, 146, 234)">&quot;</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span><span>
</span><span>  </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">&lt;%=</span><span class="token erb language-erb ruby language-ruby"> render </span><span class="token erb language-erb ruby language-ruby string-literal">&#x27;form&#x27;</span><span class="token erb language-erb ruby language-ruby">,</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">album</span><span class="token erb language-erb ruby language-ruby">:</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb ruby language-ruby">@album</span><span class="token erb language-erb ruby language-ruby"> </span><span class="token erb language-erb delimiter" style="color:rgb(199, 146, 234)">%&gt;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token" style="color:rgb(127, 219, 202)">div</span><span class="token" style="color:rgb(199, 146, 234)">&gt;</span></code></div></pre>
<p>And the final styling.</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-css" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* application.scss */</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* Styling for the header section */</span><span>
</span><span></span><span class="token rule" style="color:rgb(255, 203, 139)">@import</span><span class="token" style="color:rgb(255, 203, 139)"> </span><span class="token" style="color:rgb(130, 170, 255)">url</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;https://fonts.googleapis.com/css?family=Sansita+One&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">section</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">height</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">100</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">background-color</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span>   </span><span class="token hexcode color">#154890</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">a</span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">,</span><span class="token" style="color:rgb(199, 146, 234);font-style:italic"> a</span><span class="token pseudo-class" style="color:rgb(199, 146, 234);font-style:italic">:hover</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">font-family</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;Sansita One&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> cursive</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">color</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span>  </span><span class="token hexcode color">#F5EDE3</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">font-size</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">50</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">font-weight</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">700</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">text-decoration</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> none</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* Styling for the Edit page */</span><span>
</span>
<span></span><span class="token class" style="color:rgb(199, 146, 234);font-style:italic">.image</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span>  ..
<!-- -->  ..
<span>  </span><span class="token" style="color:rgb(128, 203, 196)">height</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">200</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">form</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">label</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">display</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> block</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">div</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">margin-top</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">15</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">margin-bottom</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">15</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">img</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">margin</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">5</span><span class="token unit">px</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span>  </span><span class="token id" style="color:rgb(199, 146, 234);font-style:italic">#album_name</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">width</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">50</span><span class="token unit">%</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">/* Styling for the index, show and edit pages */</span><span>
</span>
<span></span><span class="token" style="color:rgb(199, 146, 234);font-style:italic">h2</span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  </span><span class="token" style="color:rgb(128, 203, 196)">margin</span><span class="token" style="color:rgb(199, 146, 234)">:</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">30</span><span class="token unit">px</span><span> auto</span><span class="token" style="color:rgb(199, 146, 234)">;</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<p>That&#x27;s it. Our gallery project is done. I&#x27;ll throw a few screenshots for those of you who didn&#x27;t do it.</p>
<p><img src="https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_index.png#center" alt="Gallery screenshot"/>
<img src="https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_new.png#center" alt="Gallery screenshot"/>
<img src="https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_edit.png#center" alt="Gallery screenshot"/>
<img src="https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_show.png#center" alt="Gallery screenshot"/></p><footer class="jsx-eb7a88ca53252729"><div class="jsx-7814f24efc48ee15 list-categories"><a class="jsx-7814f24efc48ee15" href="/categories/rails">rails</a><a class="jsx-7814f24efc48ee15" href="/categories/gallery">gallery</a><a class="jsx-7814f24efc48ee15" href="/categories/ruby">ruby</a><a class="jsx-7814f24efc48ee15" href="/categories/paperclip">paperclip</a></div><a class="jsx-eb7a88ca53252729 go-back" href="/"></a></footer></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"gallery-with-rails-5-paperclip-and-blueimp","title":"Gallery with Rails 5, Paperclip and blueimp","date":"2016-10-16T00:00:00.000Z","description":"Building a gallery with Rails 5, Paperclip for image processing and blueimp for JS image interaction.","categories":["rails","gallery","ruby","paperclip"],"markdown":"\nRecently I had to build a gallery with Rails and it took me a few days finding solutions to my problems on the web. This article is the result of everything I found, put together. I'll keep it as brief as possible and if you have any questions please drop me an email and I'll try to explain as best as I can.\n\nAlright, enough chit chat let's roll our sleeves. First we have to create our new project.\n\n```bash\nrails new gallery -T\n```\n\nSweet. Next we'll update our Gemfile\n\n```ruby\n# Gemfile\n\n# File upload\ngem \"paperclip\", \"~\u003e 5.0.0\"\n# Forms\ngem 'simple_form'\n#Bootstrap\ngem 'bootstrap-sass', '~\u003e 3.3.6'\n\n```\n\nRun bundle install.  \nInstall simple_form.\n\n```bash\nrails generate simple_form:install\n```\n\nChange the name of your application.css to application.scss and import bootstrap.\n\n```css\n/* application.scss */\n\n@import 'bootstrap-sprockets';\n@import 'bootstrap';\n```\n\nNow that we have all the gems it's time to create our resources. We'll need models and two controllers for Album and Photo. For the Album we'll need all controller actions and for the Photo only destroy action.\nLet's start with the Album first.\n\n```bash\nrails g scaffold Album name description\n```\n\nThis creates the controller, the model and prepares the table for us.\nLet's create the controller, model and table for our Photos. We'll need only destroy action, so we run the following generator:\n\n```bash\nrails g controller Photos destroy\n```\n\nAnd for the model:\n\n```bash\nrails g model Photo name imageable:references\n```\n\nI've created Photo as polymorphic model for the needs of my project and I'll leave it as polymorphic for this project. It's good to see how polymorphic models are used if you haven't done it before.\nBefore we run the migration and create the tables, there are some changes we have to do for the photos table.\n\n```ruby\n#db/migrations/xxxxxxxxxxxxx_create_photos.rb\n\nt.string :name\nt.string :description\nt.references :imageable, polymorphic: true, index: true\n```\n\nChange the foreign_key: true for polymorphic: true, index: true. This will create the necessary columns for us.\n\n```ruby\nrails db:migrate\n```\n\nHaving the tables ready, it's time to add the fields for paperclip. The simplest way is to run paperclip's generator.\n\n```bash\nrails generate paperclip photo image\n```\n\nAnd `rails db:migrate` again to add the new columns for paperclip to the photos table.\nNow update the models.\n\n```ruby\n# album.rb\n\nhas_many :photos, as: :imageable, dependent: :destroy\nvalidates_presence_of :name\ndefault_scope -\u003e { order(created_at: :desc) }\n```\n\n```ruby\n# photo.rb\n\nbelongs_to :imageable, polymorphic: true\n\nhas_attached_file :image,\n  styles: { medium: \"300x300\u003e\", thumb: \"100x100\u003e\" },\n  default_url: \"/images/:style/missing.png\"\nvalidates_attachment_content_type :image, content_type: /image\\/.*\\z/\n```\n\nWhen we run the generator for the Photos controller, rails has automatically created a new route for us but it doesn't do what we need. Change with the code from the snippet below.\n\n```ruby\n# routes.rb\n\nroot to: \"albums#index\"\ndelete 'photo/:id' =\u003e 'photos#destroy', as: 'photo'\n```\n\nNext step will be to update the form partial for the Albums using simple form and rails's file_field_tag for the file attachments. We set the form to be multipart and the file_filed in order to select multiple files. All selected files will be wrapped in an array and passed to the params as key images.\n\n```erb\n\u003c!-- albums/_form.html.erb --\u003e\n\n\u003c%= simple_form_for(album, html: {multipart: true}) do |f| %\u003e\n\n  \u003c%= f.input :name %\u003e\n\n  \u003c%= f.input \"Choose photos\" do %\u003e\n    \u003c%= file_field_tag \"images[]\", type: :file, multiple: true %\u003e\n  \u003c% end %\u003e\n\n  \u003c%= f.button :submit %\u003e\n\u003c% end %\u003e\n```\n\nUpdate the albums_controller to get the array with the images from the params and add them to the given album.\n\n```ruby\n#albums_controller.rb\n\ndef create\n  @album = Album.new(album_params)\n\n  respond_to do |format|\n    if @album.save\n\n      #Add lines bellow\n      if params[:images]\n        params[:images].each { |image|\n        @album.photos.create(image: image)\n      }\n    end\n\n      format.html { redirect_to @album, notice: 'Album was successfully created.' }\n      format.json { render :show, status: :created, location: @album }\n    else\n      format.html { render :new }\n      format.json { render json: @album.errors, status: :unprocessable_entity }\n    end\n  end\nend\n```\n\nIt's time to fire up the server and see if what we've done so far is working. Go to the new album and create one with a few photos. Everything works fine and we're redirected to the show page but only the album name is visible. Let's change that. Add the following div just above the links at the bottom. Refresh and hurray, we've got our photos!\n\n```erb\n\u003c!-- albums/show.html.erb --\u003e\n\n\u003cdiv\u003e\n  \u003c% @album.photos.each do |photo| %\u003e\n        \u003c%= link_to image_tag(photo.image.url(:medium)), photo.image.url, data: { gallery: ''} %\u003e\n        \u003c% end %\u003e\n\u003c/div\u003e\n```\n\nNext thing I want to change is when I create a new album and select files, instead of just seeing the number of files selected I want to have some visual representation. Place a holder in the form.\n\n```erb\n\u003c!-- albums/_form.html.erb --\u003e\n\n\u003c%= f.input :name %\u003e\n\n\u003cdiv id=\"image-preview\"\u003e\u003c/div\u003e \u003c!-- Add this line --\u003e\n\n\u003c%= f.input \"Choose photos\" do %\u003e\n```\n\nAnd add the required javascript.\n\n```js\n// application.js\n\nvar ready;\nready = function () {\n  // Photo preview on album create\n  var preview = $('#image-preview');\n  $('#images_').change(function (event) {\n    var input = $(event.currentTarget);\n    var files = input[0].files;\n    for (var i = 0; i \u003c files.length; i++) {\n      var file = files[i];\n      var reader = new FileReader();\n      reader.onload = function (e) {\n        image_base64 = e.target.result;\n        var html = '\u003cimg src=' + image_base64 + \" style='max-width: 200px;'\u003e\";\n        preview.append(html);\n      };\n      reader.readAsDataURL(file);\n    }\n  });\n  // Clear images when Browse is clicked again\n  $('#images_').click(function () {\n    $('#image-preview img').remove();\n  });\n};\n\n$(document).on('turbolinks:load', ready);\n```\n\nI have two functions. One is to show the selected files. The other one is to clear them from the screen in case the user decides to change his selection.\n\nAnother change to the form will be to display all album photos when we update an existing album and provide a button in case the user wants to delete a photo or photos from the collection.\n\n```erb\n\u003c!-- _form.html.erb --\u003e\n\n\u003c%= f.input :name %\u003e\n\n\u003c% if @album.photos.any? %\u003e\n  \u003cdiv id=\"images\"\u003e\n    \u003c% @album.photos.each do |photo| %\u003e\n      \u003cdiv id=\"photo-\u003c%= photo.id %\u003e\" class=\"image\"\u003e\n        \u003c%= link_to photo, method: :delete,\n                          data: { confirm: 'Are you sure?' },\n                          class: \"delete-image\",\n                          remote: true,\n                          title: \"Delete Image\" do %\u003e\n            \u003ci class=\"glyphicon glyphicon-remove-circle\"\u003e\u003c/i\u003e\n          \u003c% end %\u003e\n        \u003c%= image_tag photo.image.url(:medium) %\u003e\n      \u003c/div\u003e\n    \u003c% end %\u003e\n  \u003c/div\u003e\n\u003c% end %\u003e\n\n\u003c!--\nAdd before this div\n\u003cdiv id=\"image-preview\"\u003e\u003c/div\u003e\n--\u003e\n```\n\nTo position all buttons add styling as follows:\n\n```css\n/* application.scss */\n\n.image {\n  display: inline-block;\n  position: relative;\n}\n\n.delete-image {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  color: red;\n}\n```\n\nIt's time to add some code to our photos controller.\n\n```ruby\n# photos_controller.rb\n\ndef destroy\n  photo = Photo.find(params[:id])\n  @id = photo.id\n  photo.destroy\n  respond_to :js\nend\n```\n\nCreate a new file views/photos/destroy.js.erb and add this code. This will look for a div with the id of the photo being deleted and will remove it from the screen.\n\n```js\n// destroy.js.erb\n\n$('#photo-\u003c%= @id %\u003e').fadeOut();\n```\n\nNow, let's update our albums controller in case our user wants to add some photos instead of removing them. Again we'll get all the photos being uploaded from the params[:images], but this time instead of blindly creating photos we have to check for duplicates first.\n\n```ruby\n# albums_controller.rb\n\ndef update\n  respond_to do |format|\n    if @album.update(album_params)\n\n    if params[:images]\n        params[:images].each do |image|\n          existing_image = @album.photos.find {|photo| photo.image_file_name ==\n                                                                                            image.original_filename}\n          @album.photos.create(image: image) unless existing_image\n      end\n    end\n\n      format.html { redirect_to @album, notice: 'Album was successfully updated.' }\n      format.json { render :show, status: :ok, location: @album }\n    else\n      format.html { render :edit }\n      format.json { render json: @album.errors, status: :unprocessable_entity }\n    end\n  end\nend\n```\n\nOur form is working now for new albums and editing existing. It's time to beautify the way images are displayed on the show page. I'll use blueimp's gallery. Go to https://github.com/blueimp/Gallery and download blueimp-gallery.css and blueimp-gallery-indicator.css in your stylesheets directory. Include those in your application.scss.\n\n```css\n/* application.scss */\n\n@import 'blueimp-gallery';\n@import 'blueimp-gallery-indicator';\n```\n\nThen download blueimp-gallery.js to your javascripts directory and include it in your application.js.\n\n```js\n// application.js\n\n// After turbolinks add\n//= require blueimp-gallery\n```\n\nOpen blueimp-gallery.css and update all urls for loading.gif, error.png, play-pause.png, error.svg and play-pause.svg. A valid url for image in rails looks like this:\n\n```css\nbackground: url('loading.gif');\n```\n\nAlso download all the images from blueimp/Gallery/img in your app/assets/images folder.\n\nNow all we have to do is add a snippet of code and our gallery will spring to life. Wrap our code from before in a div tag with an id \"links\" and add the code snippet for the modal at the bottom of the page. It is IMPORTANT to place this snippet as a direct descendant of the body. If your yield in the application is wrapped in a div or another tag, place the snippet on application.html.erb directly in the body. You can also import it as a partial.\n\n```erb\n\u003c!-- show.html.erb --\u003e\n\n\u003cdiv class=\"container\"\u003e\n  \u003cdiv id=\"links\"\u003e\n    \u003c% @album.photos.each do |photo| %\u003e\n        \u003c%= link_to image_tag(photo.image.url(:medium)), photo.image.url, data: { gallery: ''} %\u003e\n        \u003c% end %\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n\u003c!-- The Gallery as lightbox dialog, should be a child element of the document body --\u003e\n\u003cdiv id=\"blueimp-gallery\" class=\"blueimp-gallery blueimp-gallery-controls\"\u003e\n    \u003cdiv class=\"slides\"\u003e\u003c/div\u003e\n    \u003ch3 class=\"title\"\u003e\u003c/h3\u003e\n    \u003ca class=\"prev\"\u003e\u003c/a\u003e\n    \u003ca class=\"next\"\u003e\u003c/a\u003e\n    \u003ca class=\"close\"\u003e\u003c/a\u003e\n    \u003ca class=\"play-pause\"\u003e\u003c/a\u003e\n    \u003col class=\"indicator\"\u003e\u003c/ol\u003e\n\u003c/div\u003e\n```\n\nAdd the onclick handler for the images, right after the second function handling the Browse click.\n\n```js\n// Clear images when Browse is clicked again\n//  $(\"#images_\").click(function(){\n//    $(\"#image-preview img\").remove();\n//  });\n\n//After above function\n\n// Blueimp Light Box\ndocument.getElementById('links').onclick = function (event) {\n  event = event || window.event;\n  var target = event.target || event.srcElement,\n    link = target.src ? target.parentNode : target,\n    options = { index: link, event: event },\n    links = this.getElementsByTagName('a');\n  blueimp.Gallery(links, options);\n};\n```\n\nOur gallery is ready and looks great :) Unfortunately I can't say the same for the rest of the pages. I won't go crazy but I would like to add some basic styling for our pages. I'll start with the application.html.erb and move our notices from index and show in there along with some bootstrap styling.\n\n```erb\n\u003c!-- application.html.erb --\u003e\n\n\u003c!-- Add after body and before yield --\u003e\n\u003c% if notice %\u003e\n  \u003cdiv id=\"notice\" class=\"alert alert-info alert-dismissible\" role=\"alert\"\u003e\n    \u003cbutton type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"\u003e\u003cspan aria-hidden=\"true\"\u003e\u0026times;\u003c/span\u003e\u003c/button\u003e\n    \u003c%= notice %\u003e\n  \u003c/div\u003e\n\u003c% end %\u003e\n```\n\nAdd bootstrap-sprockets after jquery in order for our dismiss button to work.\n\n```js\n// application.js\n\n// after require jquery\n//= require bootstrap-sprockets\n```\n\n```css\n/* application.scss */\n\n#notice {\n  width: 50%;\n  text-align: center;\n  margin: 10px auto;\n}\n```\n\n```erb\n\u003c!-- index.html.erb --\u003e\n\n\u003c!-- Remove \u003cp id=\"notice\"\u003e\u003c%= notice %\u003e\u003c/p\u003e --\u003e\n```\n\n```erb\n\u003c!-- show.html.erb\n\n Remove \u003cp id=\"notice\"\u003e\u003c%= notice %\u003e\u003c/p\u003e\n--\u003e\n```\n\nIn application.html.erb I'll add a header.\n\n```erb\n\n\u003c!-- application.html.erb --\u003e\n\n\u003csection\u003e\n  \u003cdiv class=\"container\"\u003e\n      \u003ch1 class=\"text-right\"\u003e\u003c%= link_to \"Gallery\", root_url %\u003e\u003c/h1\u003e\n  \u003c/div\u003e\n\u003c/section\u003e\n```\n\nSome styling for our index page with out of the box bootstrap.\n\n```erb\n\u003c!-- index.html.erb --\u003e\n\n\u003ch2 class=\"text-center\"\u003e\u003c%= link_to 'New Album', new_album_path %\u003e\u003c/h2\u003e\n\n\u003cdiv class=\"container\"\u003e\n  \u003cdiv class=\"row\"\u003e\n    \u003c% @albums.each do |album| %\u003e\n      \u003cdiv class=\"col-sm-6 col-md-4\"\u003e\n        \u003cdiv class=\"thumbnail\"\u003e\n          \u003c% if album.photos.any? %\u003e\n            \u003c%= link_to image_tag(album.photos.first.image.url(:medium)), album %\u003e\n          \u003c% end %\u003e\n          \u003cdiv class=\"caption\"\u003e\n            \u003ch3 class=\"text-center\"\u003e\u003c%= album.name %\u003e\u003c/h3\u003e\n            \u003cp\u003e\u003c%= album.description %\u003e\u003c/p\u003e\n            \u003cp\u003e\n              \u003c%= link_to \"Edit\", edit_album_path(album), class: \"btn btn-warning\" %\u003e\n              \u003c%= link_to \"Delete\", album, class: \"btn btn-danger pull-right\",\n                                           method: :delete,\n                                           data: { confirm: 'Are you sure?' } %\u003e\n             \u003c/p\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n    \u003c% end %\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n```\n\nIn show.html remove the rails generated links.\n\n```erb\n\u003c!-- show.html.erb --\u003e\n\nremove \u003c%= link_to 'Edit', edit_album_path(@album) %\u003e |\n \u003c%= link_to 'Back', albums_path %\u003e\n```\n\nPlace new and edit pages in the container.\n\n```erb\n\u003c!-- new.html.erb --\u003e\n\n\u003ch1 class=\"text-center\"\u003eNew Album\u003c/h1\u003e\n\n\u003cdiv class=\"container\"\u003e\n  \u003c%= render 'form', album: @album %\u003e\n\u003c/div\u003e\n```\n\n```erb\n\u003c!-- edit.html.erb --\u003e\n\n\u003ch1 class=\"text-center\"\u003eEditing Album\u003c/h1\u003e\n\n\u003cdiv class=\"container\"\u003e\n  \u003c%= render 'form', album: @album %\u003e\n\u003c/div\u003e\n```\n\nAnd the final styling.\n\n```css\n/* application.scss */\n\n/* Styling for the header section */\n@import url('https://fonts.googleapis.com/css?family=Sansita+One');\n\n\nsection{\n  height: 100px;\n  background-color:   #154890;\n  a, a:hover{\n    font-family: 'Sansita One', cursive;\n    color:  #F5EDE3;\n    font-size: 50px;\n    font-weight: 700;\n    text-decoration: none;\n  }\n}\n\n/* Styling for the Edit page */\n\n.image{\n  ..\n  ..\n  height: 200px;\n}\n\nform{\n  label{\n    display: block;\n  }\n  div{\n    margin-top: 15px;\n    margin-bottom: 15px;\n  }\n  img{\n    margin: 5px;\n  }\n  #album_name{\n    width: 50%;\n  }\n}\n\n/* Styling for the index, show and edit pages */\n\nh2{\n  margin: 30px auto;\n}\n```\n\nThat's it. Our gallery project is done. I'll throw a few screenshots for those of you who didn't do it.\n\n![Gallery screenshot](https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_index.png#center)\n![Gallery screenshot](https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_new.png#center)\n![Gallery screenshot](https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_edit.png#center)\n![Gallery screenshot](https://blog-radi.s3.amazonaws.com/gallery-with-rails-5-paperclip-and-blueimp/content_show.png#center)\n"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"gallery-with-rails-5-paperclip-and-blueimp"},"buildId":"PvTMf3wyEBu3o-rd_Z3Tv","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>