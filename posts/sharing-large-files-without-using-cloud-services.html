<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="og:title" content="Sharing Large Files Without Using Cloud Services" class="jsx-eb7a88ca53252729"/><title class="jsx-eb7a88ca53252729">Sharing Large Files Without Using Cloud Services</title><meta name="next-head-count" content="4"/><link rel="icon" href="/favicon/favicon.ico"/><meta name="description" content="A collection of technical posts."/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-H1DT8LBE3Y"></script><script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-H1DT8LBE3Y');
          </script><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f65e66e62fc5ca80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-02d0f4839caa4a8e.js" defer=""></script><script src="/_next/static/chunks/83-7030382a9597fa38.js" defer=""></script><script src="/_next/static/chunks/32-1cf93db441761c8a.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-7655989d47098e38.js" defer=""></script><script src="/_next/static/YfngYCKqE4veWCi3zrSBC/_buildManifest.js" defer=""></script><script src="/_next/static/YfngYCKqE4veWCi3zrSBC/_ssgManifest.js" defer=""></script><script src="/_next/static/YfngYCKqE4veWCi3zrSBC/_middlewareManifest.js" defer=""></script><style id="__jsx-fdefdd4b6c4ce2c4">span.jsx-fdefdd4b6c4ce2c4{color:#333;font-size:.9rem}</style><style id="__jsx-7814f24efc48ee15">.list-categories.jsx-7814f24efc48ee15 a.jsx-7814f24efc48ee15{color:#333;text-transform:uppercase;font-size:.6rem;font-weight:700;margin-right:10px}</style><style id="__jsx-eb7a88ca53252729">.post.jsx-eb7a88ca53252729{width:100%}header.jsx-eb7a88ca53252729{text-align:center;margin-bottom:3rem}.post.jsx-eb7a88ca53252729 h1.jsx-eb7a88ca53252729{margin-bottom:.2rem}a.jsx-eb7a88ca53252729{color:black}footer.jsx-eb7a88ca53252729{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}footer.jsx-eb7a88ca53252729 a.go-back.jsx-eb7a88ca53252729{font-size:1.5rem}@media(max-width:820px){footer.jsx-eb7a88ca53252729{display:block}footer.jsx-eb7a88ca53252729 a.go-back.jsx-eb7a88ca53252729{float:right}}</style><style id="__jsx-5cae0e9dd922305c">html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:20px}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}p{font-weight:400;line-height:32px}a{text-decoration:none}img{width:100%}img[src*="#center"]{display:block;margin:auto}@media(max-width:820px){body{font-size:18px}p{line-height:28px}img{max-width:80vw}}</style><style id="__jsx-53df2e978e8b299a">header.jsx-5a195dee6678eb3{width:100vw;padding:1.7rem;background-color:rgba(0,0,0,.9);text-align:center}header.jsx-5a195dee6678eb3 h1.jsx-5a195dee6678eb3{margin:0}header.jsx-5a195dee6678eb3 a.jsx-5a195dee6678eb3{text-decoration:none;color:crimson}main.jsx-5a195dee6678eb3{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:20px auto;max-width:820px}@media(max-width:820px){main.jsx-5a195dee6678eb3{width:95vw}}</style></head><body><div id="__next" data-reactroot=""><div class="jsx-5a195dee6678eb3"><header class="jsx-5a195dee6678eb3"><div class="jsx-5a195dee6678eb3"><a class="jsx-5a195dee6678eb3" href="/"><h1 class="jsx-5a195dee6678eb3">Radi&#x27;s Blog</h1></a></div></header><main class="jsx-5a195dee6678eb3"><div class="jsx-eb7a88ca53252729 post"><header class="jsx-eb7a88ca53252729"><h1 class="jsx-eb7a88ca53252729">Sharing Large Files Without Using Cloud Services</h1><span class="jsx-fdefdd4b6c4ce2c4"><time dateTime="2023-09-26T00:00:00.000Z" class="jsx-fdefdd4b6c4ce2c4">26 September 2023</time></span></header><p>The other day I had to share a large file with my niece but I have run out of space on G Drive and Dropbox and I didn&#x27;t want to delete any of the files there. So I decided to spin an Express static server and allow her to download the file directly from my computer.</p>
<p>First I had to start the project:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(130, 170, 255)">mkdir</span><span> file-share-server
</span><span></span><span class="token" style="color:rgb(255, 203, 139)">cd</span><span> file-share-server
</span><span></span><span class="token" style="color:rgb(130, 170, 255)">npm</span><span> init -y
</span><span></span><span class="token" style="color:rgb(130, 170, 255)">npm</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">install</span><span> express</span></code></div></pre>
<p>After I had the project set up I have copy-pasted the example code for <a href="https://expressjs.com/en/starter/hello-world.html">&#x27;hello world&#x27;</a> and <a href="https://expressjs.com/en/starter/static-files.html">the static files middleware</a> from the Express documentation in <code style="font-size:1rem;color:crimson">index.js</code> file in the root of the project:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// index.js</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> express </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">require</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;express&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> app </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">express</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> port </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">3000</span><span>
</span>
<span>app</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">use</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>express</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">static</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;files&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span>app</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">get</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;/&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token arrow" style="color:rgb(127, 219, 202)">=&gt;</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  res</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">send</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;Hello World!&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span>app</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">listen</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span>port</span><span class="token" style="color:rgb(199, 146, 234)">)</span></code></div></pre>
<p>Next I have added a start script and in the <code style="font-size:1rem;color:crimson">package.json</code> and also <code style="font-size:1rem;color:crimson">postinstall</code> script creating <code style="font-size:1rem;color:crimson">files</code> folder in the root of the project (files will be served from this folder):</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-json" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span> </span><span class="token" style="color:rgb(128, 203, 196)">&quot;scripts&quot;</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">&quot;start&quot;</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&quot;node index.js&quot;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span>
</span><span>    </span><span class="token" style="color:rgb(128, 203, 196)">&quot;postinstall&quot;</span><span class="token" style="color:rgb(127, 219, 202)">:</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&quot;mkdir -p files&quot;</span><span>
</span><span>  </span><span class="token" style="color:rgb(199, 146, 234)">}</span></code></div></pre>
<p>To make the server serve my needs I had to add a few variables. First since this server will be public and without authentication I wanted to generate random string that will be placed in the endpoint and will prevent people from accessing any resources if they don&#x27;t have the correct url. I also want to have the url generated based on my IP given to me from my ISP. And I will also change the port to something less widely used.</p>
<p>This is the server code after the changes:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-js" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// index.js</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> express </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">require</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;express&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> crypto </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">require</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;crypto&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> app </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">express</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">SECRET</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> crypto</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">randomBytes</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(247, 140, 108)">32</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">toString</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;hex&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">PORT</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(247, 140, 108)">8008</span><span>
</span><span></span><span class="token" style="color:rgb(127, 219, 202)">const</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">IP</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">=</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&#x27;Change with your ISP IP&#x27;</span><span>
</span>
<span>app</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">use</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation" style="color:rgb(173, 219, 103)">`</span><span class="token template-string" style="color:rgb(173, 219, 103)">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation" style="color:rgb(130, 170, 255)">SECRET</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation" style="color:rgb(173, 219, 103)">`</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> express</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">static</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;files&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span></span><span class="token" style="color:rgb(99, 119, 119);font-style:italic">// Just for testing server is running</span><span>
</span><span>app</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">get</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;/&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">,</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">function</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span> </span><span class="token" style="color:rgb(199, 146, 234)">{</span><span>
</span><span>  res</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">send</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(173, 219, 103)">&#x27;Hello World&#x27;</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span><span></span><span class="token" style="color:rgb(199, 146, 234)">}</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span>app</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">listen</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token" style="color:rgb(130, 170, 255)">PORT</span><span class="token" style="color:rgb(199, 146, 234)">)</span><span>
</span>
<span></span><span class="token console" style="color:rgb(255, 203, 139)">console</span><span class="token" style="color:rgb(199, 146, 234)">.</span><span class="token method property-access" style="color:rgb(130, 170, 255)">log</span><span class="token" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation" style="color:rgb(173, 219, 103)">`</span><span class="token template-string" style="color:rgb(173, 219, 103)">
</span><span class="token template-string" style="color:rgb(173, 219, 103)">  Link to file you want ot share will be:
</span><span class="token template-string" style="color:rgb(173, 219, 103)">  http://</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation" style="color:rgb(130, 170, 255)">IP</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string" style="color:rgb(173, 219, 103)">:</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation" style="color:rgb(130, 170, 255)">PORT</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string" style="color:rgb(173, 219, 103)">/</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation" style="color:rgb(130, 170, 255)">SECRET</span><span class="token template-string interpolation interpolation-punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string" style="color:rgb(173, 219, 103)">/full-name-of-file-you-want-to-share-including.extension\n
</span><span class="token template-string" style="color:rgb(173, 219, 103)">  Make sure file is in ./files folder
</span><span class="token template-string" style="color:rgb(173, 219, 103)"></span><span class="token template-string template-punctuation" style="color:rgb(173, 219, 103)">`</span><span class="token" style="color:rgb(199, 146, 234)">)</span></code></div></pre>
<p>With the server ready I had to find what is my IP and replace the <code style="font-size:1rem;color:crimson">IP</code> variable. Google &#x27;what is my ip&#x27; to find what is yours.</p>
<p>Next I had to set port forwarding in my router in order to redirect calls to port <code style="font-size:1rem;color:crimson">8008</code> to my machine. To find what is your local IP on Mac or Linux run the following command in the console:</p>
<pre><div style="color:white;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;background:#011627"><code class="language-bash" style="color:#d6deeb;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;font-size:1em;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:rgb(130, 170, 255)">ifconfig</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">grep</span><span> </span><span class="token" style="color:rgb(173, 219, 103)">&quot;inet &quot;</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">grep</span><span> -v </span><span class="token" style="color:rgb(247, 140, 108)">127.0</span><span>.0.1 </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">cut</span><span> -d </span><span class="token" style="color:rgb(173, 219, 103)">&quot; &quot;</span><span> -f </span><span class="token" style="color:rgb(247, 140, 108)">2</span><span> </span><span class="token" style="color:rgb(127, 219, 202)">|</span><span> </span><span class="token" style="color:rgb(130, 170, 255)">head</span><span> -n </span><span class="token" style="color:rgb(247, 140, 108)">1</span></code></div></pre>
<p>On Widows it should be in Settings &gt; Network &amp; Internet &gt; Ethernet &gt; IPv4 / IPv6 address</p>
<p>With the server running and the router set to redirect requests on port <code style="font-size:1rem;color:crimson">8008</code> to your machine you can place files in the <code style="font-size:1rem;color:crimson">files</code> folder and share them with anyone.</p>
<p>I should point out that Google prevents links to be open in Chrome because it is a http server. But downloads were successful with Edge and Firefox.</p>
<p>I recommend shutting down the server and removing/ disabling port forwarding in your router after you are done sharing.</p>
<p>You can get the code for this project from <a href="https://github.com/raditotev/file-share-server">github</a>.</p>
<p>I have also created another version using Bun instead of NodeJS. Find it here: https://github.com/raditotev/file-share-server-with-bun</p>
<p>I</p><footer class="jsx-eb7a88ca53252729"><div class="jsx-7814f24efc48ee15 list-categories"><a class="jsx-7814f24efc48ee15" href="/categories/NodeJS">NodeJS</a><a class="jsx-7814f24efc48ee15" href="/categories/JavaScript">JavaScript</a><a class="jsx-7814f24efc48ee15" href="/categories/Bun">Bun</a></div><a class="jsx-eb7a88ca53252729 go-back" href="/">🏠</a></footer></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"sharing-large-files-without-using-cloud-services","title":"Sharing Large Files Without Using Cloud Services","date":"2023-09-26T00:00:00.000Z","description":"If you ever had to share large files but you run out of space on your cloud storage this article might come in handy.","categories":["NodeJS","JavaScript","Bun"],"markdown":"\nThe other day I had to share a large file with my niece but I have run out of space on G Drive and Dropbox and I didn't want to delete any of the files there. So I decided to spin an Express static server and allow her to download the file directly from my computer.\n\nFirst I had to start the project:\n\n```bash\nmkdir file-share-server\ncd file-share-server\nnpm init -y\nnpm install express\n```\n\nAfter I had the project set up I have copy-pasted the example code for ['hello world'](https://expressjs.com/en/starter/hello-world.html) and [the static files middleware](https://expressjs.com/en/starter/static-files.html) from the Express documentation in `index.js` file in the root of the project:\n\n```js\n// index.js\n\nconst express = require('express')\nconst app = express()\nconst port = 3000\n\napp.use(express.static('files'))\n\napp.get('/', (req, res) =\u003e {\n  res.send('Hello World!')\n})\n\napp.listen(port)\n```\n\nNext I have added a start script and in the `package.json` and also `postinstall` script creating `files` folder in the root of the project (files will be served from this folder):\n\n```json\n \"scripts\": {\n    \"start\": \"node index.js\",\n    \"postinstall\": \"mkdir -p files\"\n  }\n```\n\nTo make the server serve my needs I had to add a few variables. First since this server will be public and without authentication I wanted to generate random string that will be placed in the endpoint and will prevent people from accessing any resources if they don't have the correct url. I also want to have the url generated based on my IP given to me from my ISP. And I will also change the port to something less widely used.\n\nThis is the server code after the changes:\n\n```js\n// index.js\n\nconst express = require('express')\nconst crypto = require('crypto')\n\nconst app = express()\nconst SECRET = crypto.randomBytes(32).toString('hex')\nconst PORT = 8008\nconst IP = 'Change with your ISP IP'\n\napp.use(`/${SECRET}`, express.static('files'))\n\n// Just for testing server is running\napp.get('/', function (req, res) {\n  res.send('Hello World')\n})\n\napp.listen(PORT)\n\nconsole.log(`\n  Link to file you want ot share will be:\n  http://${IP}:${PORT}/${SECRET}/full-name-of-file-you-want-to-share-including.extension\\n\n  Make sure file is in ./files folder\n`)\n```\n\nWith the server ready I had to find what is my IP and replace the `IP` variable. Google 'what is my ip' to find what is yours.\n\nNext I had to set port forwarding in my router in order to redirect calls to port `8008` to my machine. To find what is your local IP on Mac or Linux run the following command in the console:\n\n```bash\nifconfig | grep \"inet \" | grep -v 127.0.0.1 | cut -d \" \" -f 2 | head -n 1\n```\n\nOn Widows it should be in Settings \u003e Network \u0026 Internet \u003e Ethernet \u003e IPv4 / IPv6 address\n\nWith the server running and the router set to redirect requests on port `8008` to your machine you can place files in the `files` folder and share them with anyone.\n\nI should point out that Google prevents links to be open in Chrome because it is a http server. But downloads were successful with Edge and Firefox.\n\nI recommend shutting down the server and removing/ disabling port forwarding in your router after you are done sharing.\n\nYou can get the code for this project from [github](https://github.com/raditotev/file-share-server).\n\nI have also created another version using Bun instead of NodeJS. Find it here: https://github.com/raditotev/file-share-server-with-bun\n\nI\n"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"sharing-large-files-without-using-cloud-services"},"buildId":"YfngYCKqE4veWCi3zrSBC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>